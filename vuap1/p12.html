<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>P012 — Передаточное число по воздушной скорости</title>
  <style>
    :root{
      --bg1:#071a33; --bg2:#0b2a55;
      --panel:#0f2340; --panel2:#0b1c34;
      --text:#e8eefc; --muted:#b9c6e6;
      --white:#ffffff; --ink:#111;
      --border:#c9c9c9;
      --ok:#2ecc71; --bad:#ff5a5f; --warn:#ffd166;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Times New Roman", Times, serif;
      background: radial-gradient(1200px 800px at 30% 20%, #0d2a52 0%, var(--bg1) 50%, #061224 100%);
      color:var(--text);
    }
    .topbar{
      padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between;
      color:var(--muted);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size:13px;
      opacity:.9;
    }
    .wrap{max-width:1100px; margin:0 auto; padding:0 14px 40px;}
    .paper{
      background:var(--white);
      color:var(--ink);
      border-radius:10px;
      padding:18px 18px 12px;
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.15);
    }

    /* Таблица технологии (как в карте) */
    .h1{
      font-size:18px; font-weight:700; margin:0 0 4px;
    }
    .h2{
      font-size:12.5px; margin:0 0 10px;
    }
    table.tech{
      width:100%;
      border-collapse:collapse;
      table-layout:fixed;
      font-size:12px;
      line-height:1.25;
    }
    table.tech th, table.tech td{
      border:1px solid var(--border);
      vertical-align:top;
      padding:8px 8px;
    }
    table.tech th{
      text-align:center;
      font-weight:700;
    }
    .col-ops{width:58%}
    .col-tt{width:20%}
    .col-work{width:22%}

    .figbox{
      margin-top:8px;
      border:1px solid var(--border);
      padding:8px;
    }
    .figcap{
      font-size:12px;
      margin:0 0 6px;
    }
    .figbox img{
      width:100%;
      height:auto;
      display:block;
      border:1px solid #ddd;
      background:#fff;
    }

    /* Панель калькулятора */
    .calc{
      margin-top:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.14);
      border-radius:12px;
      padding:14px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .calc h3{
      margin:0 0 6px;
      font-size:14px;
      font-weight:700;
    }
    .calc .sub{
      margin:0 0 10px;
      font-size:12px;
      color:var(--muted);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr 1.2fr 1fr;
      gap:10px;
    }
    .field{
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.12);
      border-radius:10px;
      padding:10px;
    }
    .label{
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px;
    }
    input{
      width:100%;
      padding:10px 10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(8,14,24,.55);
      color:var(--text);
      outline:none;
      font-size:14px;
    }
    input::placeholder{color:#8fa2d7}

    .btns{
      display:flex; flex-wrap:wrap; gap:8px;
      margin-top:10px;
    }
    button{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color:var(--text);
      padding:10px 12px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      font-size:13px;
    }
    button:hover{background: rgba(255,255,255,.12)}
    .out{
      margin-top:10px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.12);
      border-radius:10px;
      padding:10px;
      font-size:13px;
      min-height:44px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .badge{
      padding:6px 10px;
      border-radius:999px;
      font-weight:800;
      font-size:12px;
      border:1px solid rgba(255,255,255,.18);
      white-space:nowrap;
    }
    .ok{background: rgba(46,204,113,.18); color: var(--ok); border-color: rgba(46,204,113,.35);}
    .bad{background: rgba(255,90,95,.16); color: var(--bad); border-color: rgba(255,90,95,.35);}
    .neutral{background: rgba(255,255,255,.06); color: var(--muted);}

    /* “Красивый” вид формулы (без MathJax) */
    .formula{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-top:6px;
      color:var(--muted);
      font-size:12.5px;
    }
    .frac{
      display:inline-grid;
      grid-template-rows:auto auto;
      justify-items:center;
      line-height:1.05;
      font-family:"Times New Roman", Times, serif;
      color:#fff;
    }
    .frac .top{
      padding:0 6px 2px;
      border-bottom:1px solid rgba(255,255,255,.55);
    }
    .frac .bot{
      padding-top:2px;
    }
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;}
    .hint{
      margin-top:8px;
      font-size:12px;
      color:var(--muted);
    }

    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div>Mi-Avionics-Tools / vuap1 / <b>p012.html</b></div>
    <div>Пункт 12 — воздушная скорость</div>
  </div>

  <div class="wrap">
    <div class="paper">
      <div class="h1">Содержание операций</div>
      <div class="h2">12. Проверьте передаточное число по воздушной скорости</div>

      <!-- ТЕХНОЛОГИЯ: ТЕКСТ ТЫ ВСТАВИШЬ САМ (СЛОВО-В-СЛОВО) -->
      <table class="tech">
        <colgroup>
          <col class="col-ops"><col class="col-tt"><col class="col-work">
        </colgroup>
        <thead>
          <tr>
            <th>Содержание операций</th>
            <th>Технические требования<br>(ТТ)</th>
            <th>Работы, выполняемые при отклонениях<br>от ТТ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
             Подсоединить к КЗСП установку КПУ-3 с указателем скорости, смотри рисунок 9.
             И создать в динамической системе КЗСП давление соответствующее скорости Vпр=200км/ч.
             Нажать кнопку-табло "ВКЛ" на пульте управления канала тангажа и кнопку "СТАБИЛИЗАЦИЯ СКОРОСТИ" на центральном пульте лётчика.
             Поворотом шкалы ручки центровки на пульте управления канала тангажа установить стрелку индикатора нулевого в среднее положение.
             Заметить положение шкалы.Изменить при помощи установки КПУ-3 значение воздушной скорости на 30км/ч в сторону увеличения(уменьшения) и поворотом шкалы ручки центровки на пульте управления канала тангажа
             против часовой стрелки (по часовой стрелки) установить стрелку индикатора нулевого в среднее положение.
             Замерить величину угла поворота шкалы ручки центровки от ранее замеченного положения.
             Полученное значение угла поворота шкалы и передаточное число должны соответствовать техническим требованиям.Отключить канал тангажа и стабилизацию скорости кнопкой-табло "ОТКЛ" на пульте управления канала тангажа.
             Угол поворота шкалы ручки центровки 4,5° ±1.5°. Передаточное число 0,15 ±0,06 град / км/ч.
            </td>
            <td>
             Угол поворота шкалы ручки центровки 4,5° ±1.5°. 
Передаточное число 0,15 ±0,06 град / км/ч
Передаточное число в градусах угла танга-жа на км/ч подсчитывается по формуле:
i = α /30 град / км/ч  где: 
α  - величина угла поворота шкалы ручки центровки, град; 
30 - изменение приборной скорости, км/ч

            </td>
            <td>
              Нажмите кнопку-табло "ОТКЛ" на пульте управления канала тангажа. Нажмите кнопку-табло "ВКЛ." на пульте управления канала тангажа и кнопку "СТАБИЛ. СКОРОСТИ" на левом переднем пульте летчика. Поворотом шкалы ручки центровки на пульте управления установите подвижный индекс нулевого индикатора в среднее положение.
Заметьте положение шкалы ручки центровки. Измените значение приборной скорости в сторону увеличения на 30 км/ч от исходного значения 200 км/ч. Поверните шкалу ручки центровки на пульте управления против часовой стрелки на угол 4,5°. Поворотом подстроечного резистора "ДК" на пульте управления подвижный индекс нулевого индикатора установите в среднее положение. Плавно измените значение приборной скорости на 30 км/ч в сторону уменьшения от исходного значения 200 км/ч
Поворотом шкалы ручки центровки по часовой стрелке установите подвижный индекс нулевого индикатора в среднее положение. Определите угол поворота шкалы ручки центровки от первоначально замеченного положения. Угол поворота шкалы должен быть в пределах 4,5° +-1,0°
            </td>
          </tr>
        </tbody>
      </table>

      <div class="figbox">
        <div class="figcap">Рис. (44.JPEG)</div>
        <img src="./44.JPEG" alt="Рисунок к пункту 12"
             onerror="this.style.display='none'; this.parentElement.insertAdjacentHTML('beforeend','<div style=&quot;margin-top:6px;color:#b00020;font-weight:700;font-family:system-ui,Segoe UI,Arial;&quot;>ОШИБКА: файл 44.JPEG не найден рядом с p012.html (проверь имя/регистр/папку).</div>');">
      </div>
    </div>

    <!-- КАЛЬКУЛЯТОР (ТОЛЬКО ЭТО МЕНЯЕМ) -->
    <div class="calc" id="calc">
      <h3>Калькулятор передаточного числа (по воздушной скорости)</h3>
      <p class="sub">
        Формула (как в карте): <b>i<sub>v</sub> = α / 30</b> &nbsp;[град/(км/час)].
        По умолчанию ΔV = 30 км/час (как в технологии), но можно задать своё ΔV.
      </p>

      <div class="formula" aria-label="Формула красивым видом">
        <span style="color:#fff"><b>i<sub>v</sub></b> =</span>
        <span class="frac">
          <span class="top"><b>&alpha;</b></span>
          <span class="bot"><b>&Delta;V</b></span>
        </span>
        <span class="mono">[град/(км/час)]</span>
        <span style="opacity:.8">, где &alpha; — угол поворота шкалы, &Delta;V — изменение воздушной скорости.</span>
      </div>

      <div class="grid" style="margin-top:10px;">
        <div class="field">
          <div class="label">α (угол поворота шкалы ручки центровки), град</div>
          <input id="alpha" inputmode="decimal" placeholder="например 4.5" />
        </div>

        <div class="field">
          <div class="label">ΔV (изменение воздушной скорости), км/час</div>
          <input id="dv" inputmode="decimal" value="30" />
        </div>

        <div class="field">
          <div class="label">Проверка по допуску (необязательно)</div>
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px;">
            <div>
              <div class="label" style="margin:0 0 6px;">i<sub>v</sub> min</div>
              <input id="ivMin" inputmode="decimal" placeholder="например 0.10" />
            </div>
            <div>
              <div class="label" style="margin:0 0 6px;">i<sub>v</sub> max</div>
              <input id="ivMax" inputmode="decimal" placeholder="например 0.20" />
            </div>
          </div>
        </div>
      </div>

      <div class="btns">
        <button type="button" id="btnIv">Посчитать i<sub>v</sub> = α / ΔV</button>
        <button type="button" id="btnAlpha">Посчитать α = i<sub>v</sub> · ΔV</button>
        <button type="button" id="btnClear">Очистить</button>
      </div>

      <div class="out" id="out">
        <div id="outText">Готов. Введи α и ΔV и нажми “Посчитать”.</div>
        <div class="badge neutral" id="badge">—</div>
      </div>

      <div class="hint">
        • Если i<sub>v</sub> min/max не заполнены — подсветка PASS/FAIL не применяется.<br>
        • Десятичные можно вводить точкой или запятой.
      </div>
    </div>
  </div>

  <script>
    // --- helpers ---
    function parseNum(v){
      if (v === null || v === undefined) return NaN;
      const s = String(v).trim().replace(',', '.');
      if (!s) return NaN;
      const n = Number(s);
      return Number.isFinite(n) ? n : NaN;
    }
    function fmt(n, digits=3){
      if (!Number.isFinite(n)) return '—';
      return n.toFixed(digits).replace('.', ',');
    }
    function setBadge(type, text){
      const b = document.getElementById('badge');
      b.className = 'badge ' + (type || 'neutral');
      b.textContent = text || '—';
    }

    function applyTolerance(iv){
      const min = parseNum(document.getElementById('ivMin').value);
      const max = parseNum(document.getElementById('ivMax').value);
      const hasTol = Number.isFinite(min) && Number.isFinite(max) && max >= min;

      if (!hasTol){
        setBadge('neutral', 'без допуска');
        return;
      }

      if (!Number.isFinite(iv)){
        setBadge('bad', 'FAIL');
        return;
      }

      if (iv >= min && iv <= max){
        setBadge('ok', 'PASS');
      } else {
        setBadge('bad', 'FAIL');
      }
    }

    // --- calc ---
    function calcIv(){
      const alpha = parseNum(document.getElementById('alpha').value);
      const dv = parseNum(document.getElementById('dv').value);

      const outText = document.getElementById('outText');

      if (!Number.isFinite(alpha) || !Number.isFinite(dv) || dv === 0){
        outText.textContent = 'Ошибка ввода: проверь α и ΔV (ΔV не должно быть 0).';
        setBadge('bad', 'FAIL');
        return;
      }

      const iv = alpha / dv; // i_v = α / ΔV
      outText.innerHTML =
        'i<sub>v</sub> = α / ΔV = ' +
        fmt(alpha, 3) + ' / ' + fmt(dv, 3) +
        ' = <b>' + fmt(iv, 4) + '</b> град/(км/час)';
      applyTolerance(iv);
    }

    function calcAlpha(){
      const iv = parseNum(prompt('Введи i_v (град/(км/час)):', '0.15'));
      const dv = parseNum(document.getElementById('dv').value);

      const outText = document.getElementById('outText');

      if (!Number.isFinite(iv) || !Number.isFinite(dv)){
        outText.textContent = 'Отмена/ошибка ввода i_v или ΔV.';
        setBadge('neutral', '—');
        return;
      }

      const alpha = iv * dv; // α = i_v · ΔV
      document.getElementById('alpha').value = String(alpha).replace('.', ',');
      outText.innerHTML =
        '&alpha; = i<sub>v</sub> · ΔV = ' +
        fmt(iv, 4) + ' · ' + fmt(dv, 3) +
        ' = <b>' + fmt(alpha, 3) + '</b> град';
      // допуск относится к i_v — проверим его
      applyTolerance(iv);
    }

    function clearAll(){
      document.getElementById('alpha').value = '';
      document.getElementById('dv').value = '30';
      document.getElementById('ivMin').value = '';
      document.getElementById('ivMax').value = '';
      document.getElementById('outText').textContent = 'Готов. Введи α и ΔV и нажми “Посчитать”.';
      setBadge('neutral', '—');
    }

    document.getElementById('btnIv').addEventListener('click', calcIv);
    document.getElementById('btnAlpha').addEventListener('click', calcAlpha);
    document.getElementById('btnClear').addEventListener('click', clearAll);

    // Автопересчёт i_v при вводе (если оба поля заполнены корректно)
    ['alpha','dv','ivMin','ivMax'].forEach(id=>{
      document.getElementById(id).addEventListener('input', ()=>{
        const a = parseNum(document.getElementById('alpha').value);
        const dv = parseNum(document.getElementById('dv').value);
        if (Number.isFinite(a) && Number.isFinite(dv) && dv !== 0){
          const iv = a/dv;
          // обновим только подсветку, чтобы не “мигало” текстом
          applyTolerance(iv);
        } else {
          setBadge('neutral', '—');
        }
      });
    });
  </script>
</body>
</html>
