<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Пункт 8. Проверка передаточного числа по угловой скорости — Канал направления</title>

  <style>
    :root{
      --bg:#071229;        /* тёмно-синий фон */
      --paper:#ffffff;     /* лист */
      --ink:#111111;       /* текст */
      --grid:#2b2b2b;      /* линии таблицы */
      --muted:#555;
    }

    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--ink);
      font-family:"Times New Roman", Times, serif; /* ближе к карте */
    }

    .wrap{
      max-width:1100px;
      margin:24px auto 48px;
      padding:0 14px;
    }

    .paper{
      background:var(--paper);
      border-radius:12px;
      box-shadow:0 14px 40px rgba(0,0,0,.35);
      padding:18px 18px 22px;
      overflow:hidden;
    }

    .title{
      font-size:22px;
      font-weight:700;
      margin:2px 0 10px;
    }
    .subtitle{
      font-size:14px;
      margin:0 0 14px;
      color:#222;
    }

    /* === ТАБЛИЦА КАК ТЕХНОКАРТА === */
    table.tech{
      width:100%;
      border-collapse:collapse;
      table-layout:fixed;
      border:2px solid var(--grid);
      font-size:15px;
      line-height:1.25;
    }
    table.tech col.c1{width:52%}
    table.tech col.c2{width:20%}
    table.tech col.c3{width:28%}

    table.tech th, table.tech td{
      border:1px solid var(--grid);
      vertical-align:top;
      padding:10px 10px;
    }
    table.tech th{
      text-align:center;
      font-weight:700;
    }

    /* важно: чтобы текст вставлялся СЛОВО-В-СЛОВО с переносами */
    .pre{
      white-space:pre-wrap;     /* сохраняет переносы, но переносит длинные строки */
      word-break:break-word;
    }

    .note{
      font-size:13px;
      color:var(--muted);
      margin-top:10px;
    }

    /* === БЛОК РИСУНКА === */
    .figure{
      margin-top:10px;
      border:1px solid var(--grid);
      padding:10px;
    }
    .figcap{
      font-size:14px;
      margin-bottom:8px;
      font-weight:700;
    }
    .figure img{
      display:block;
      max-width:100%;
      height:auto;
      border:1px solid #bbb;
      background:#f6f6f6;
    }

    /* === ФОРМУЛЫ/КАЛЬКУЛЯТОР === */
    .calc{
      margin-top:18px;
      padding:14px;
      border:2px solid rgba(255,255,255,.15);
      border-radius:12px;
      background:rgba(255,255,255,.06);
      color:#eaf1ff;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .calc h2{
      margin:0 0 10px;
      font-size:18px;
    }
    .calc .row{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    .calc label{
      display:block;
      font-size:13px;
      opacity:.9;
      margin:0 0 6px;
    }
    .calc input{
      width:100%;
      box-sizing:border-box;
      padding:10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.22);
      background:rgba(0,0,0,.25);
      color:#fff;
      outline:none;
    }
    .calc .btns{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .calc button{
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.12);
      color:#fff;
      cursor:pointer;
    }
    .calc button:hover{background:rgba(255,255,255,.18)}
    .calc .out{
      margin-top:10px;
      padding:10px;
      border-radius:10px;
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.18);
      font-size:14px;
      white-space:pre-wrap;
    }
    .calc .small{
      font-size:12px;
      opacity:.85;
      margin-top:6px;
      line-height:1.35;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="paper">
      <div class="title">Содержание операций</div>
      <div class="subtitle"><b>8.</b> Проверьте передаточное число по угловой скорости: <b>А. Канала направления</b></div>

      <table class="tech" aria-label="Технологическая карта — Канал направления">
        <colgroup>
          <col class="c1"><col class="c2"><col class="c3">
        </colgroup>
        <thead>
          <tr>
            <th>Содержание операций</th>
            <th>Технические требования (ТТ)</th>
            <th>Работы, выполняемые при отклонениях от ТТ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <!-- ЛЕВЫЙ СТОЛБЕЦ: СОДЕРЖАНИЕ ОПЕРАЦИЙ (ВСТАВЬ СЮДА СЛОВО-В-СЛОВО) -->
            <td class="pre">8. Проверьте передаточное число по угловой скорости:

 Канала направления, для чего:
 Снимите с вертолета датчик угловой скорости, установите его на. установку УПГ-56 с помощью кронштейна 6С4.132.020 и с помощью переходного жгута 6С6.640.046-1 соедините датчик со схемой вертолета;
 выключатель В3 технологического жгута 246-9948-00 установите в положение "Wy ";
 Нажмите кнопку- лампочку  "ВКЛ". на пульте управления и поворотом шкалы ручки центровки установите подвижный индекс нулевого индикатора в среднее положение;
 Задайте с помощью установки вращение датчика, соответствующее правому (левому) разво¬роту вертолета и, плавно меняя скорость вращения установки, отклоните шток малого цилиндра рулевого агрегата в положение, при котором подвижный индекс нулевого индикатора совместится с промежуточной отметкой.
 Заметьте направление отклонения подвижного индекса нулевого индикатора от среднего положения;	
 При вращении датчика в сторону правого (левого) разворота подвижный индекс нулевого индикатора должен отклоняться влево (вправо).
 Замерьте секундомером время поворота платформы установки на определенный угол и определите угловую скорость враще¬ния, как частное от деления величины угла на время поворота установки на этот угол,полученное значение задаваемой угловой скорости и передаточного числа по угловой скорости должно соответствовать техническим требованиям.
 Отключить канал направления кнопкой-табло "ОТКЛ" на пульте управления.
      Поставьте ноги на педали и произведите аналогичную проверку (режим управления по курсу)   
      Задаваемая угловая скорость  (6,5+6,5-2,0)град/с, Передаточное число (10  ±8)% хода штока/град/с.
После проверки и регулировки передаточного числа в канале направления выключатель В3 на технологическом жгуте поставить в положение "ОТКЛ" и проверить работоспособность изодрома в цепи ДУСа следующим образом:
        Задав вращение платформы установки, соответствующее правому (левому) развороту.
        Подвижный индекс нулевого индикатора должен отклониться влево (вправо), а затем возвратиться в среднее положение.
После проверки и регулировки, отключить канал направления кнопкой табло "ОТКЛ" на пульте управления и установить датчик угловой скорости на место.
              
            </td>

            <!-- СРЕДНИЙ СТОЛБЕЦ: ТТ (ВСТАВЬ СЮДА СЛОВО-В-СЛОВО) -->
            <td class="pre">Технические требования (ТТ)
Задаваемая угловая скорость
(3,5+2,1-1,1)град/с 
Передаточное число
(20 ±8) % хода штока/град/с 
Задаваемая угловая скорость
(6,5+6,5-2,0)град/с 
Передаточное число
(10  ±8)%хода штока/град/с
</td>

            <!-- ПРАВЫЙ СТОЛБЕЦ: РАБОТЫ ПРИ ОТКЛОНЕНИЯХ (ВСТАВЬ СЮДА СЛОВО-В-СЛОВО) -->
            <td class="pre">Работы, выполняемые при отклонениях от ТТ
Отключите и вновь включите канал направления кнопками- лампочками "ОТКЛ" и "ВКЛ." на пульте управления. Поворотом шкалы ручки центровки установите подвиж-ный индекс нулевого индикатора в среднее положение. Задайте вращение установке, со-ответ¬ствующее правому развороту со скоро-стью 3,5 град/с Поворотом подстроечного ре-зистора "СКОР." на пульте управления добей-тесь, чтобы подвижный индекс нулевого ин-дикатора совместился с левой промежуточной отметкой. Измените направление вращения установки (в сторону левого разворота) и плавным изменением скорости вращения совместите подвижный' индекс нулевого ин-дикатора с правой промежуточной точной от-меткой. Скорость вращения должна быть (3,5 ±0,7)град/с</td>
              </tr>

          <tr>
            <td colspan="3" class="figrow">
              <div class="figure">
                <div class="figcap">Рис. 6 (29.JPEG)</div>
                <img id="fig6" src="./29.JPEG"
                     alt="Рис. 6. Крепление датчика угловых скоростей на поворотной установке."
                     onerror="showImgError();" />
                <div id="imgErr" class="imgerr" style="display:none;"></div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ФОРМУЛЫ (КРАСИВО, С БУКВАМИ μ, ω, Δφ) -->
    <div class="card">
      <div class="math">
        <b>Формулы</b><br>
        1) Определение угловой скорости вращения: &nbsp; <b>ω = Δφ / t</b><br>
        2) Определение передаточного числа по угловой скорости: &nbsp; <b>μ = S / ω</b>
      </div>
      <div class="help">
        Где: Δφ — угол поворота платформы, град; t — время поворота, сек; ω — угловая скорость, град/с; S — ход штока, %.
        Угол Δφ нужен только чтобы вычислить ω по секундомеру (как в карте). Если ω уже известна — вводи ω напрямую.
      </div>
    </div>

    <!-- КАЛЬКУЛЯТОР -->
    <div class="card">
      <div style="font-weight:800; font-size:16px; margin-bottom:10px;">Калькулятор передаточного числа (канал направления)</div>

      <div class="calcgrid">
        <div class="field">
          <label>Режим ТТ</label>
          <select id="mode">
            <option value="main">Основной: ω = 3,5 (+2,1 −1,1) ; μ = 20 ±8</option>
            <option value="iso">По курсу (изодром): ω = 6,5 (+6,5 −2,0) ; μ = 10 ±8</option>
          </select>
        </div>

        <div class="field">
          <label>Ход штока S, % (для μ = S/ω)</label>
          <input id="stroke" inputmode="decimal" placeholder="например 66.7 или 30" />
        </div>

        <div class="field">
          <label>Угловая скорость ω, град/с (можно ввести напрямую)</label>
          <input id="omega" inputmode="decimal" placeholder="например 3.5" />
        </div>

        <div class="field">
          <label>Время поворота t, сек (для расчёта ω = Δφ/t)</label>
          <input id="time" inputmode="decimal" placeholder="например 25.7" />
        </div>

        <div class="field">
          <label>Угол поворота Δφ, град (для расчёта ω = Δφ/t)</label>
          <input id="angle" inputmode="decimal" placeholder="например 90" />
        </div>

        <div class="field">
          <label>Полный ход по карте, % (фиксировано 66,7 для μ = 66,7/ω)</label>
          <input id="full" inputmode="decimal" value="66.7" />
        </div>
      </div>

      <div class="btnrow">
        <button type="button" onclick="calcOmega()">Посчитать ω = Δφ / t</button>
        <button type="button" onclick="calcMuFromS()">Посчитать μ = S / ω</button>
        <button type="button" onclick="calcMuFromFull()">Посчитать μ = 66,7 / ω</button>
        <button type="button" onclick="checkTT()">Проверить по ТТ (PASS/FAIL)</button>
        <button type="button" onclick="resetAll()">Очистить</button>
      </div>

      <div id="out" class="out">Готово.</div>
    </div>

    <div class="help">
      Если GitHub Pages показывает старую версию — открой ссылку в режиме инкогнито или добавь к URL <b>?v=1</b> (потом меняй цифру).
    </div>
  </div>

<script>
  function showImgError(){
    const el = document.getElementById('imgErr');
    el.style.display = 'block';
    el.textContent =
      'ОШИБКА: не найден файл 29.JPEG рядом с p08.html. ' +
      'Проверь: имя = ровно "29.JPEG" (регистр важен) и лежит в той же папке vuap1.';
  }

  // --- утилиты ---
  function n(v){
    if(v === null || v === undefined) return NaN;
    const s = String(v).trim().replace(',', '.');
    if(s === '') return NaN;
    return Number(s);
  }
  function isBad(x){ return Number.isNaN(x) || !Number.isFinite(x); }
  function fmt(x, d=3){
    if(isBad(x)) return 'NaN';
    return Number(x).toFixed(d).replace(/\.?0+$/,''); // без лишних нулей
  }
  function setOut(text){ document.getElementById('out').textContent = text; }

  // --- ТТ диапазоны (из твоих данных) ---
  // Основной: ω = 3.5 (+2.1 -1.1) => [2.4 ; 5.6]
  //          μ = 20 ±8 => [12 ; 28]
  // Изодром: ω = 6.5 (+6.5 -2.0) => [4.5 ; 13.0]
  //          μ = 10 ±8 => [2 ; 18]
  const TT = {
    main: { wMin: 2.4, wMax: 5.6, muMin: 12, muMax: 28, name:'Основной' },
    iso:  { wMin: 4.5, wMax:13.0, muMin:  2, muMax: 18, name:'Изодром (по курсу)' }
  };

  // --- расчёты ---
  function calcOmega(){
    const ang = n(document.getElementById('angle').value);
    const t   = n(document.getElementById('time').value);
    if(isBad(ang) || isBad(t) || t <= 0){
      setOut('Ошибка: для ω = Δφ/t введи Δφ (град) и t (сек), при этом t > 0.');
      return;
    }
    const w = ang / t;
    document.getElementById('omega').value = fmt(w, 5);
    setOut(`ω = Δφ / t = ${fmt(ang,3)} / ${fmt(t,3)} = ${fmt(w,5)} град/с`);
  }

  function calcMuFromS(){
    const S = n(document.getElementById('stroke').value);
    const w = n(document.getElementById('omega').value);
    if(isBad(S)){
      setOut('Ошибка: введи S (% хода штока).');
      return;
    }
    if(isBad(w) || w <= 0){
      setOut('Ошибка: введи ω (град/с), ω > 0. Можно посчитать ω кнопкой ω = Δφ/t.');
      return;
    }
    const mu = S / w;
    setOut(`μ = S / ω = ${fmt(S,3)} / ${fmt(w,5)} = ${fmt(mu,5)} %/(град/с)`);
  }

  function calcMuFromFull(){
    const full = n(document.getElementById('full').value);
    const w    = n(document.getElementById('omega').value);
    if(isBad(full) || full <= 0){
      setOut('Ошибка: поле "полный ход" должно быть > 0 (обычно 66.7).');
      return;
    }
    if(isBad(w) || w <= 0){
      setOut('Ошибка: введи ω (град/с), ω > 0. Можно посчитать ω кнопкой ω = Δφ/t.');
      return;
    }
    const mu = full / w;
    setOut(`μ = ${fmt(full,3)} / ω = ${fmt(full,3)} / ${fmt(w,5)} = ${fmt(mu,5)} %/(град/с)`);
  }

  function checkTT(){
    const mode = document.getElementById('mode').value;
    const tt = TT[mode];

    const w = n(document.getElementById('omega').value);
    const S = n(document.getElementById('stroke').value);

    if(isBad(w) || w <= 0){
      setOut(`Ошибка: введи ω (град/с), ω > 0. Для ТТ "${tt.name}" сравнение невозможно.`);
      return;
    }
    if(isBad(S)){
      setOut(`Ошибка: введи S (%). Для ТТ "${tt.name}" сравнение μ невозможно.`);
      return;
    }

    const mu = S / w;

    const wOK  = (w >= tt.wMin && w <= tt.wMax);
    const muOK = (mu >= tt.muMin && mu <= tt.muMax);

    let res = '';
    res += `Режим: ${tt.name}\n`;
    res += `ω = ${fmt(w,5)} град/с ; ТТ: [${fmt(tt.wMin,3)} … ${fmt(tt.wMax,3)}] → ${wOK ? 'PASS' : 'FAIL'}\n`;
    res += `S = ${fmt(S,3)} %\n`;
    res += `μ = S/ω = ${fmt(mu,5)} %/(град/с) ; ТТ: [${fmt(tt.muMin,3)} … ${fmt(tt.muMax,3)}] → ${muOK ? 'PASS' : 'FAIL'}\n`;

    // подсказки по "СКОР."
    if(!muOK){
      res += `\nПодсказка (по карте): при отклонении μ выполняется регулировка потенциометром/резистором "СКОР." на пульте управления.\n`;
    }
    setOut(res);
  }

  function resetAll(){
    document.getElementById('stroke').value = '';
    document.getElementById('omega').value  = '';
    document.getElementById('time').value   = '';
    document.getElementById('angle').value  = '';
    document.getElementById('full').value   = '66.7';
    setOut('Готово.');
  }
</script>
</body>
</html>
