<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>П11. Проверка передаточного числа по скорости изменения высоты</title>
  <style>
    :root{
      --bg1:#06142c;
      --bg2:#0a2a58;
      --card:#ffffff;
      --ink:#0b0b0b;
      --line:#2b2b2b;
      --muted:#6b6b6b;
      --panel:#0b1f3f;
      --panel2:#0e2a56;
      --panelLine:rgba(255,255,255,.18);
      --panelText:#e9f0ff;
      --panelText2:rgba(233,240,255,.75);
      --accent:#69a7ff;
      --btn:#183a72;
      --btn2:#214a8f;
      --bad:#ff6b6b;
      --ok:#5ee28f;
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Times New Roman", Times, serif;
      background: radial-gradient(1200px 800px at 20% 15%, var(--bg2), var(--bg1));
      color:var(--panelText);
    }

    .topbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:10px 16px;
      font-family: Arial, Helvetica, sans-serif;
      font-size:12px;
      color:var(--panelText2);
    }
    .topbar b{color:var(--panelText)}
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:14px 16px 26px;
    }

    /* Белая "страница" как в документе */
    .paper{
      background:var(--card);
      color:var(--ink);
      border-radius:10px;
      box-shadow:0 10px 30px rgba(0,0,0,.35);
      padding:14px 14px 16px;
      border:1px solid rgba(0,0,0,.15);
    }
    .paper .h1{
      font-weight:700;
      font-size:18px;
      margin:0 0 4px 0;
    }
    .paper .h2{
      margin:0 0 10px 0;
      font-size:13px;
      font-weight:400;
    }

    table.tech{
      width:100%;
      border-collapse:collapse;
      table-layout:fixed;
      font-size:12px;
      line-height:1.2;
    }
    table.tech th, table.tech td{
      border:1px solid #3a3a3a;
      vertical-align:top;
      padding:8px 8px;
      word-break:break-word;
    }
    table.tech th{
      text-align:center;
      font-weight:700;
      background:#f7f7f7;
    }

    /* блок рисунка внутри "листа" */
    .figblock{
      border:1px solid #3a3a3a;
      margin-top:10px;
      padding:8px;
    }
    .figcap{
      font-size:12px;
      font-weight:700;
      margin:0 0 6px 0;
    }
    .figblock img{
      display:block;
      max-width:100%;
      height:auto;
      border:1px solid #9a9a9a;
    }

    /* Панель калькулятора */
    .calc{
      margin-top:14px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--panelLine);
      border-radius:12px;
      padding:14px;
      box-shadow:0 10px 24px rgba(0,0,0,.22);
      font-family: Arial, Helvetica, sans-serif;
    }
    .calc h3{
      margin:0 0 8px 0;
      font-size:14px;
      font-weight:700;
      color:var(--panelText);
    }
    .calc .sub{
      margin:0 0 12px 0;
      font-size:12px;
      color:var(--panelText2);
    }
    .grid{
      display:grid;
      grid-template-columns: 1.2fr 1fr 1fr;
      gap:10px;
    }
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
    }
    .field{
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.14);
      border-radius:10px;
      padding:10px;
    }
    .field label{
      display:block;
      font-size:12px;
      color:var(--panelText2);
      margin-bottom:6px;
    }
    .field input, .field select{
      width:100%;
      box-sizing:border-box;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.20);
      background: rgba(6,20,44,.55);
      color:var(--panelText);
      padding:10px 10px;
      outline:none;
      font-size:14px;
    }
    .btnrow{
      display:flex;
      gap:10px;
      margin-top:10px;
      flex-wrap:wrap;
    }
    button{
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(180deg, var(--btn2), var(--btn));
      color:var(--panelText);
      padding:10px 12px;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
      font-size:13px;
    }
    button:active{transform:translateY(1px)}
    .out{
      margin-top:10px;
      padding:10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color:var(--panelText);
      font-size:13px;
      min-height:38px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .out .big{
      font-size:16px;
      font-weight:800;
      color:var(--panelText);
    }
    .hint{
      margin-top:8px;
      color:var(--panelText2);
      font-size:12px;
      line-height:1.35;
    }
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;}
  </style>
</head>

<body>
  <div class="topbar">
    <div><b>Mi-Avionics-Tools</b> / vuap1 / p11.html</div>
    <div>Пункт 11 — скорость изменения высоты</div>
  </div>

  <div class="wrap">
    <div class="paper">
      <div class="h1">Содержание операций</div>
      <div class="h2">11. Проверьте передаточное число по скорости изменения высоты.</div>

      <!-- ТАБЛИЦА 3 КОЛОНКИ — один в один по структуре -->
      <table class="tech">
        <colgroup>
          <col style="width:58%">
          <col style="width:20%">
          <col style="width:22%">
        </colgroup>
        <thead>
          <tr>
            <th>Содержание операций</th>
            <th>Технические требования<br>(ТТ)</th>
            <th>Работы, выполняемые при отклонениях от ТТ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
             Подсоединить к КЗВ установку КПУ-3 с вариометром (рис.8).
             Выключатель В1 в технологическом жгуте 24-7100-70 поставить в положение "Vy".
             Создать при помощи КПУ-3 разрежение, соответствующее высоте 300м.
             Нажать кнопку-табло "ВКЛ" на пульте управления канала высоты и поворотом потенциометра "ЦЕНТР" установить стрелку индикатора нулевого в среднее положение.
             Плавно изменить с помощью КПУ-3 разрежение на подъём(спуск) величину 100м изменения высоты от исходного значения 300м.
             Заметить установленное значение высоты.
             Плавным изменением вертикальной скорости при помощи КПУ-3 на спуск(подъём) в пределах не более 200 метров изменения высоты от установленного значения отклонить шток малого цилиндра рулевого агрегата
             до совмещения стрелки индикатора нулевого с промежуточной отметкой,заметив по вариометру величину вертикальной скорости и направления  отклонения стрелки индикатора нулевого.
             При отклонении стрелкм вариометра на спуск(подъём) стрелка индикатора нулевого должна отклоняться вверх(вниз).
             Полученное значение вертикальной скорости и передаточное число должно соответствовать техническим требованиям. Задаваемая вертикальная скорость (6,5+4,5-3,5) м/с,Передаточное число (10 ±4) % хода шока / м/с.
             По окончании проверки (и регулировки) выключатель В1 поставить в положение "ОТКЛ" и в случае,если при включённом канале высоты стрелка индикатора нулевого будет не в среднем положении,
             произвести подрегулировку потенциометром "ЦЕНТР".
             Отключить канал высоты кнопкой-табло "ОТКЛ" на пульте управления канала высоты.
              
            </td>
            <td>
            При отклонении стрелки вариометра на спуск (подъем) подвижный индекс нулевого индикатора должен отклоняться вверх (вниз).
            Задаваемая вертикальная скорость 
            (6,5+4,5-3,5) м/с
            Передаточное число
            (10 ±4) % хода шока / м/с

            </td>
            <td>
             Отключите канал высоты кнопкой -табло "ОТКЛ." на пульте управления. Создайте разрежение, соответствующее высоте 300 м. Включите канал высоты кнопкой- табло "ВКЛ." на пульте управления. 
             Поворотом потенциометра "ЦЕНТР" установите подвижный индекс нулевого индикатора в среднее положение. Создайте вертикальную скорость 6,5 м/с в сторону спуска в пределах не более 200 м изменения высоты от полученного значения и поворотом подстроечного резистора "СКОР." на пульте управления совместите подвижный индекс нулевого индикатора с верхней промежуточной отметкой. 
             Плавно изменяя вертикальную скорость в сторону подъема,  совместите подвижный индекс нулевого индикатора с нижней промежуточной отметкой. Вертикальная скорость должна быть в пределах (6,5+2,0-1,0) м/с.
            </td>
          </tr>
        </tbody>
      </table>

      <!-- РИСУНОК -->
      <div class="figblock">
        <div class="figcap">Рис. (40.JPEG)</div>
        <img src="./40.JPEG"
             alt="Рисунок 40. (из технологии)"
             onerror="this.insertAdjacentHTML('afterend','<div style=&quot;margin-top:8px;color:#b00020;font-weight:700;font-family:Arial&quot;>ОШИБКА: файл 40.JPEG не найден рядом с p11.html (проверь имя/регистр/папку).</div>'); this.remove();" />
        <div style="margin-top:6px;font-size:12px;color:#444;font-family:Arial">
          Если картинка не открылась: имя файла и регистр должны быть ровно <b>40.JPEG</b>, и он должен лежать рядом с <b>p11.html</b> в папке <b>vuap1</b>.
        </div>
      </div>
    </div>

    <!-- КАЛЬКУЛЯТОР -->
  <section class="calc card" id="calc-vy">
  <div class="cardTitle">Калькулятор передаточного числа (скорость изменения высоты)</div>

  <div class="calcSub">
    Формула: <span class="mono">μ = 66,7 / V<sub>y</sub></span>,
    где <span class="mono">V<sub>y</sub></span> — задаваемая вертикальная скорость.
    Допуск (ТТ): <span class="mono">μ = 10 ± 4</span> ⇒ <span class="mono">6 … 14</span>.
  </div>

  <div class="calcGrid">
    <div class="field">
      <label for="vy">V<sub>y</sub> (задаваемая вертикальная скорость)</label>
      <input id="vy" type="number" inputmode="decimal" step="0.1" placeholder="например 5.0">
      <div class="hint">Введи значение скорости. Ноль и минус — нельзя.</div>
    </div>

    <div class="field">
      <label for="vyUnit">Единицы V<sub>y</sub></label>
      <select id="vyUnit">
        <option value="ms" selected>м/с</option>
        <option value="mmin">м/мин</option>
      </select>
      <div class="hint">Если выбрано м/мин — автоматически переведём в м/с.</div>
    </div>

    <div class="field">
      <label>Результат</label>
      <div class="resultBox">
        <div id="muValue" class="muValue mono">—</div>
        <div id="muUnit" class="muUnit">%(м/с)</div>
        <div id="muBadge" class="badge neutral">Ожидание ввода</div>
      </div>
      <div id="muRange" class="hint mono">Допуск: μ ∈ [6; 14]</div>
    </div>
  </div>

  <div class="btnRow">
    <button class="btn primary" type="button" onclick="calcMuVy()">Посчитать</button>
    <button class="btn" type="button" onclick="clearMuVy()">Очистить</button>
  </div>

  <div id="muMsg" class="msg neutral">
    Введи V<sub>y</sub> и нажми «Посчитать».
  </div>
</section>

<style>
  /* Карточка в твоём синем стиле (подходит к текущему p11) */
  .card{
    margin: 18px auto 26px auto;
    max-width: 980px;
    background: rgba(10, 22, 40, .55);
    border: 1px solid rgba(255,255,255,.10);
    border-radius: 12px;
    padding: 14px 14px 16px 14px;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
    color: #e9eef7;
  }
  .cardTitle{
    font-weight: 700;
    font-size: 16px;
    margin-bottom: 8px;
  }
  .calcSub{
    font-size: 13px;
    opacity: .92;
    line-height: 1.35;
    margin-bottom: 12px;
  }
  .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

  .calcGrid{
    display: grid;
    grid-template-columns: 1.2fr .8fr 1fr;
    gap: 12px;
  }
  @media (max-width: 860px){
    .calcGrid{ grid-template-columns: 1fr; }
  }
  .field label{
    display:block;
    font-size: 12px;
    margin-bottom: 6px;
    opacity: .95;
  }
  .field input, .field select{
    width: 100%;
    box-sizing: border-box;
    padding: 10px 10px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.22);
    color: #e9eef7;
    outline: none;
  }
  .field input:focus, .field select:focus{
    border-color: rgba(120,180,255,.55);
    box-shadow: 0 0 0 3px rgba(120,180,255,.12);
  }
  .hint{
    font-size: 11px;
    opacity: .70;
    margin-top: 6px;
    line-height: 1.25;
  }

  .resultBox{
    display:flex;
    gap: 10px;
    align-items: baseline;
    padding: 10px;
    border-radius: 10px;
    background: rgba(0,0,0,.18);
    border: 1px solid rgba(255,255,255,.10);
    flex-wrap: wrap;
  }
  .muValue{
    font-size: 18px;
    font-weight: 800;
    letter-spacing: .2px;
  }
  .muUnit{
    font-size: 12px;
    opacity: .8;
  }
  .badge{
    font-size: 11px;
    padding: 4px 8px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    opacity: .95;
  }
  .badge.ok{
    border-color: rgba(60,255,0,.35);
    background: rgba(60,255,0,.12);
    color: #bfffb0;
  }
  .badge.bad{
    border-color: rgba(255,59,59,.45);
    background: rgba(255,59,59,.12);
    color: #ffc2c2;
  }
  .badge.neutral{
    color: rgba(233,238,247,.85);
  }

  .btnRow{
    display:flex;
    gap: 10px;
    margin-top: 12px;
  }
  .btn{
    border: 1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.06);
    color: #e9eef7;
    padding: 9px 12px;
    border-radius: 10px;
    cursor: pointer;
    user-select: none;
  }
  .btn:hover{ background: rgba(255,255,255,.10); }
  .btn.primary{
    border-color: rgba(120,180,255,.45);
    background: rgba(120,180,255,.12);
  }

  .msg{
    margin-top: 10px;
    padding: 10px 12px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,.10);
    background: rgba(0,0,0,.16);
    font-size: 12px;
    line-height: 1.35;
  }
  .msg.ok{
    border-color: rgba(60,255,0,.30);
    background: rgba(60,255,0,.08);
    color: #caffbe;
  }
  .msg.bad{
    border-color: rgba(255,59,59,.35);
    background: rgba(255,59,59,.08);
    color: #ffd0d0;
  }
  .msg.neutral{
    color: rgba(233,238,247,.85);
  }
</style>

<script>
  // Пункт 11: μ = 66.7 / Vy, допуск: 10 ± 4 => [6; 14]
  function calcMuVy(){
    const vyEl = document.getElementById('vy');
    const unitEl = document.getElementById('vyUnit');

    const muValueEl = document.getElementById('muValue');
    const muUnitEl  = document.getElementById('muUnit');
    const badgeEl   = document.getElementById('muBadge');
    const msgEl     = document.getElementById('muMsg');

    let Vy = parseFloat(String(vyEl.value).replace(',', '.'));
    const unit = unitEl.value;

    // Проверка ввода
    if (!isFinite(Vy) || Vy <= 0){
      muValueEl.textContent = '—';
      muUnitEl.textContent = '%(м/с)';
      badgeEl.className = 'badge bad';
      badgeEl.textContent = 'Ошибка';
      msgEl.className = 'msg bad';
      msgEl.textContent = 'Ошибка ввода: Vу должно быть числом больше 0.';
      return;
    }

    // Перевод м/мин -> м/с
    let Vy_ms = Vy;
    if (unit === 'mmin'){
      Vy_ms = Vy / 60.0;
      if (Vy_ms <= 0){
        muValueEl.textContent = '—';
        badgeEl.className = 'badge bad';
        badgeEl.textContent = 'Ошибка';
        msgEl.className = 'msg bad';
        msgEl.textContent = 'Ошибка: после перевода в м/с получилось Vу ≤ 0.';
        return;
      }
    }

    const mu = 66.7 / Vy_ms;

    // Допуск ТТ: 6…14
    const muMin = 6.0;
    const muMax = 14.0;

    muValueEl.textContent = mu.toFixed(2).replace('.', ',');
    muUnitEl.textContent = '%(м/с)';

    if (mu >= muMin && mu <= muMax){
      badgeEl.className = 'badge ok';
      badgeEl.textContent = 'В ДОПУСКЕ';
      msgEl.className = 'msg ok';
      msgEl.innerHTML =
        'OK: μ = <span class="mono">' + mu.toFixed(2).replace('.', ',') +
        '</span> %(м/с), допуск <span class="mono">[6; 14]</span>.';
    } else {
      badgeEl.className = 'badge bad';
      badgeEl.textContent = 'ВНЕ ДОПУСКА';
      msgEl.className = 'msg bad';
      msgEl.innerHTML =
        'FAIL: μ = <span class="mono">' + mu.toFixed(2).replace('.', ',') +
        '</span> %(м/с), допуск <span class="mono">[6; 14]</span>.';
    }
  }

  function clearMuVy(){
    document.getElementById('vy').value = '';
    document.getElementById('vyUnit').value = 'ms';

    document.getElementById('muValue').textContent = '—';
    document.getElementById('muUnit').textContent = '%(м/с)';

    const badgeEl = document.getElementById('muBadge');
    badgeEl.className = 'badge neutral';
    badgeEl.textContent = 'Ожидание ввода';

    const msgEl = document.getElementById('muMsg');
    msgEl.className = 'msg neutral';
    msgEl.innerHTML = 'Введи V<sub>y</sub> и нажми «Посчитать».';
  }
</script>
