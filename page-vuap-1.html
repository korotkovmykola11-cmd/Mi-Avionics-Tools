<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>ВУАП-1 — единый вход</title>

  <style>
    :root{
      --bg1:#0b1a2a;
      --bg2:#153a5a;
      --card:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.18);
      --text:#e9f2ff;
      --muted:#b7c7dd;
      --btn:rgba(255,255,255,.10);
      --btnH:rgba(255,255,255,.14);
      --active:rgba(255,255,255,.22);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 15% 10%, rgba(255,255,255,.12), transparent 60%),
        radial-gradient(800px 500px at 85% 20%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(180deg,var(--bg1),var(--bg2));
    }
    .wrap{max-width:1200px;margin:0 auto;padding:20px 16px 28px}
    .top{
      display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;
      margin-bottom:14px;
    }
    .brand{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:16px;
      padding:14px 18px;
      backdrop-filter:blur(6px);
    }
    .brand h1{margin:0;font-size:18px;letter-spacing:.4px}
    .brand p{margin:4px 0 0;font-size:13px;color:var(--muted)}
    .nav{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
    }
    a.btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:9px 12px;border-radius:12px;text-decoration:none;
      border:1px solid var(--stroke);
      background:var(--btn);
      color:var(--text);
      font-size:13px;font-weight:700;
    }
    a.btn:hover{background:var(--btnH)}
    .badge{
      padding:8px 12px;border-radius:999px;border:1px solid var(--stroke);
      background:rgba(255,255,255,.12);
      font-size:12px;white-space:nowrap;
    }

    .grid{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:14px;
      align-items:start;
    }

    .panel, .viewer{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:18px;
      backdrop-filter:blur(6px);
      box-shadow:0 18px 40px rgba(0,0,0,.25);
    }

    .panel{padding:14px}
    .panel h2{margin:0 0 10px;font-size:15px}
    .panel .hint{margin:0 0 12px;font-size:13px;color:var(--muted);line-height:1.35}

    .menu{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .menu button{
      width:100%;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--stroke);
      background:var(--btn);
      color:var(--text);
      font-size:14px;
      font-weight:800;
      text-align:left;
      cursor:pointer;
    }
    .menu button:hover{background:var(--btnH)}
    .menu button.active{background:var(--active)}
    .menu small{display:block;color:var(--muted);font-weight:600;margin-top:2px}

    .viewer{
      padding:0;
      overflow:hidden;
    }
    .viewerTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border-bottom:1px solid var(--stroke);
      background:rgba(0,0,0,.15);
    }
    .viewerTop .title{
      font-size:13px;
      color:var(--muted);
      font-weight:700;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:70%;
    }
    .viewerTop .tools{
      display:flex;gap:8px;flex-wrap:wrap;
    }
    .toolBtn{
      padding:8px 10px;
      border-radius:12px;
      border:1px solid var(--stroke);
      background:var(--btn);
      color:var(--text);
      font-size:12px;
      font-weight:800;
      cursor:pointer;
    }
    .toolBtn:hover{background:var(--btnH)}

    iframe{
      width:100%;
      height:calc(100vh - 210px);
      min-height:720px;
      border:0;
      background:white;
    }

    @media (max-width:980px){
      .grid{grid-template-columns:1fr}
      iframe{height:80vh;min-height:640px}
      .viewerTop .title{max-width:60%}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <h1>ВУАП-1</h1>
        <p>Единый вход · открытие пунктов p04…p12 из папки <b>/vuap1/</b></p>
      </div>

      <div class="nav">
        <a class="btn" href="./index.html">← На главную</a>
        <div class="badge">page-vuap-1.html</div>
      </div>
    </div>

    <div class="grid">
      <!-- ЛЕВОЕ МЕНЮ -->
      <div class="panel">
        <h2>Пункты</h2>
        <p class="hint">
          Нажми пункт — он откроется справа.<br>
          В ссылку добавляется <b>?v=время</b>, чтобы GitHub Pages не показывал старую версию.
        </p>

        <div class="menu" id="menu">
          <button data-file="p04.html">
            Пункт 4 — Крутизна сигнала (ОС)
            <small>vuap1/p04.html</small>
          </button>

          <button data-file="p08.html">
            Пункт 8 — Угловая скорость (направление)
            <small>vuap1/p08.html</small>
          </button>

          <button data-file="p09.html">
            Пункт 9 — Угловая скорость (крен)
            <small>vuap1/p09.html</small>
          </button>

          <button data-file="p10.html">
            Пункт 10 — Угловая скорость (тангаж)
            <small>vuap1/p10.html</small>
          </button>

          <button data-file="p11.html">
            Пункт 11 — Скорость изменения высоты
            <small>vuap1/p11.html</small>
          </button>

          <button data-file="p12.html">
            Пункт 12 — Воздушная скорость
            <small>vuap1/p12.html</small>
          </button>
        </div>
      </div>

      <!-- ПРАВЫЙ ПРОСМОТР -->
      <div class="viewer">
        <div class="viewerTop">
          <div class="title" id="currentTitle">Не выбрано</div>

          <div class="tools">
            <button class="toolBtn" id="btnReload" type="button">Обновить</button>
            <button class="toolBtn" id="btnOpenNew" type="button">Открыть в новой вкладке</button>
          </div>
        </div>

        <iframe id="frame" title="VUAP-1 viewer" src=""></iframe>
      </div>
    </div>
  </div>

<script>
  const frame = document.getElementById('frame');
  const currentTitle = document.getElementById('currentTitle');
  const menu = document.getElementById('menu');
  const btnReload = document.getElementById('btnReload');
  const btnOpenNew = document.getElementById('btnOpenNew');

  let currentFile = '';

  function buildUrl(file){
    // анти-кэш: всегда свежая версия
    return './vuap1/' + file + '?v=' + Date.now();
  }

  function setActive(btn){
    menu.querySelectorAll('button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }

  function openFile(file, btn){
    currentFile = file;
    const url = buildUrl(file);
    frame.src = url;

    // заголовок сверху
    const label = btn ? btn.childNodes[0].textContent.trim() : file;
    currentTitle.textContent = label + ' — ' + 'vuap1/' + file;

    if(btn) setActive(btn);
  }

  // клики по меню
  menu.addEventListener('click', (e) => {
    const btn = e.target.closest('button[data-file]');
    if(!btn) return;
    openFile(btn.dataset.file, btn);
  });

  // Обновить текущий
  btnReload.addEventListener('click', () => {
    if(!currentFile){
      alert('Сначала выбери пункт слева.');
      return;
    }
    frame.src = buildUrl(currentFile);
  });

  // Открыть в новой вкладке
  btnOpenNew.addEventListener('click', () => {
    if(!currentFile){
      alert('Сначала выбери пункт слева.');
      return;
    }
    window.open('./vuap1/' + currentFile + '?v=' + Date.now(), '_blank', 'noopener');
  });

  // Авто-открытие при первом запуске (пункт 4)
  // Если хочешь другой — поменяй здесь:
  const first = menu.querySelector('button[data-file="p04.html"]');
  if(first) openFile(first.dataset.file, first);
</script>

</body>
</html>
